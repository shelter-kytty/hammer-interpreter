
fibLog : n = {
    fibInner : a b p q n = {
        printf(f"{1} {2} {3} {4} {5}\n" a b p q n)
        if n == 0 then b else {
            if n % 2 == 0 then {
                <- fibInner(
                    a b
                    p * p + q * q
                    2 * p * q + q * q
                    n / 2
                )
            } else {
                <- fibInner(
                    b * q + a * q + a * p
                    b * p + a * q
                    p q
                    n - 1
                )
            }
        }
    }

    fibInner(1 0 0 1 n)
}

a3 = clock()

print fibLog(8)

b3 = clock()

printf(f"fibLog took {1} seconds\n" ; b3 - a3)
